@page "/loginpage"
@using BooksUIBlazor.Data
@inject UserLoginService userLoginService


<PageTitle>Login Page</PageTitle>

<h1>Login</h1>



@if(userLogin == null)
{
    <div>
        <form method = "post" OnSubmit="@Userlogin">

            <div class="mt-3">
                <label class="form-label">Email</label>
                <input type="email" class="form-control" value = "@email"  />

            </div>

            <div class="mt-3">
                <label class="form-label">Password</label>
                <input type="password" class="form-control"  value = "@password" />

            </div>

            <div class="mt-3">
                <input type="submit" class="btn btn-primary" value="Login" />
            </div>

            <div class="mt-3  d-flex justify-content-between">
                <button class="btn btn-primary">Register</button>
            </div>

        </form>

    </div>
}

@code {
    private string? email;
    private string? password;
    private UserLogin userLogin;

    

    public async Task<UserLogin> Userlogin()
    {

        System.Diagnostics.Debug.WriteLine("working");

        if(!string.IsNullOrEmpty(email) || !string.IsNullOrWhiteSpace(email))
        {
            if(!string.IsNullOrEmpty(password) || !string.IsNullOrWhiteSpace(password))
            {
                var userLogin = await userLoginService.Login(new UserLogin {Username =  email, Password = password});

                

                return userLogin;
            }

            
        }

         return userLogin;
    }

   

   
}
